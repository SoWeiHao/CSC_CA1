<div class="jumbotron">
    <h1>CSC Assignment Task 1 JQuery</h1> <h2 style="cursor: pointer;">C# Version</h2>
    <input type="button" class="btn btn-primary" value="Call NEA Weather Service API" id="retrieveWeatherDetailsButton" /><br />
    <pre id="weatherDetails"></pre><br />
</div><br />

@section scripts{
    <script>
        jQuery('#retrieveWeatherDetailsButton').on('click', function () {

            $.ajax({
                url: 'https://api.data.gov.sg/v1/environment/2-hour-weather-forecast', 
                method: 'GET',
                dataType: 'json',
                async: true,
                cache: true,
            }).done(function (data) {
                var displayData = document.getElementById("weatherDetails");
                var display = JSON.stringify(data, null, '\t');
                displayData.append(display);
                console.log(data);
            }).fail(function () {
                new noty({
                    text: "The system has encountered problem consuming the API. Please retry.",
                    theme: 'relax',
                    layout: 'center',
                    timeout: 5000,
                    type: 'error'
                }).show();
            });//End of ajax().done()

        })

        $('h2').on('click', function () {
            location.href = "http://localhost:50533/WeatherServiceForm.aspx";
        });
    </script>
}
